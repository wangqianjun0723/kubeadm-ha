# 提权操作
ansible_become: true

# 是否等待启动
wait_plugins_ready: true

# 是否启用网络组建
network_plugins_enabled: true

_host_architecture_groups:
  x86_64: amd64
  aarch64: arm64
  armv7l: arm
host_architecture: >-
  {%- if ansible_architecture in _host_architecture_groups -%}
  {{ _host_architecture_groups[ansible_architecture] }}
  {%- else -%}
  {{ ansible_architecture }}
  {%- endif -%}

# 1.10+ admission plugins
kube_apiserver_enable_admission_plugins: 
- NodeRestriction
# - AlwaysPullImages
# - PodSecurityPolicy

# kubernetes各组件镜像仓库前缀
kube_image_repository: registry.aliyuncs.com/kubeadm-ha

# 集群网络插件，目前支持flannel, calico
network_plugin: "calico"
# 集群pod ip段
kube_pod_subnet: 10.244.0.0/18
# 集群service ip段
kube_service_subnet: 10.244.64.0/18
# 设置 flannel 后端
# flannel_backend: "host-gw"
flannel_backend: "vxlan"
# flannel 镜像地址
flannel_image: "{{ kube_image_repository }}/coreos_flannel:v0.13.0"

# 设置calico 网络 backend: brid, vxlan, none
calico_backend: bird
# calico mtu
calico_veth_mtu: 0
# calico 相关镜像
calico_typha_image: "{{ kube_image_repository }}/calico_typha:v3.17.1"
calico_cni_image: "{{ kube_image_repository }}/calico_cni:v3.17.1"
calico_node_image: "{{ kube_image_repository }}/calico_node:v3.17.1"
calico_kube_controllers_image: "{{ kube_image_repository }}/calico_kube-controllers:v3.17.1"
calico_pod2daemon_flexvol_image: "{{ kube_image_repository }}/calico_pod2daemon-flexvol:v3.17.1"
# 设置 Felix 日志级别(debug, info, warning, error)
calico_felix_log_level: "warning"
# calicoctl image 地址
calicoctl_image: "{{ kube_image_repository }}/calico_ctl:v3.17.1"
# 默认使用kube-proxy的 'iptables' 模式，可选 'ipvs' 模式(experimental)
kube_proxy_mode: "iptables"
# NodePort端口范围
kube_service_node_port_range: 30000-32767